import{t as a}from"./translate-9557bc41.js";import{c as d}from"./job-713fa754.js";let t=null;const W=r=>{const i=WA.state.mapWidth,o=WA.state.mapHeight,l=[];for(let e=1;e<i;e++)for(let m=1;m<o;m++)l.push({x:e,y:m,tile:null,layer:`${r}/block`});WA.room.setTiles(l)},$=(r=["secretPassageZone"],i=null)=>{for(let o=0;o<r.length;o++)WA.state[`${r[o]}Discovered`]?(WA.room.hideLayer(`${r[o]}/trace`),WA.room.showLayer(`${r[o]}/found`),WA.room.hideLayer(`${r[o]}/disappear`)):(d("findSecretPassages")?(WA.room.showLayer(`${r[o]}/trace`),WA.room.onEnterLayer(`${r[o]}/trace`).subscribe(()=>{WA.state[`${r[o]}Discovered`]||(t=WA.ui.displayActionMessage({message:a("utils.executeAction",{action:a("modules.secretPassage.findSecretPassage")}),callback:()=>{WA.state[`${r[o]}Discovered`]=!0}}))}),WA.room.onLeaveLayer(`${r[o]}/trace`).subscribe(()=>{t==null||t.remove()})):(WA.room.hideLayer(`${r[o]}/trace`),WA.room.hideLayer(`${r[o]}/found`),WA.room.hideLayer(`${r[o]}/disappear`)),WA.state.onVariableChange(`${r[o]}Discovered`).subscribe(()=>{A(r[o],i?i[o]:null)}))},A=(r,i=null)=>{WA.room.hideLayer(`${r}/trace`),WA.room.showLayer(`${r}/search`),setTimeout(()=>{WA.room.showLayer(`${r}/found`),WA.room.hideLayer(`${r}/disappear`),W(r),setTimeout(()=>{WA.room.hideLayer(`${r}/search`),i&&i()},1e3)},3e3)};export{$ as i,W as r};
