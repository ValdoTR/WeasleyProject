import{t as e}from"./translate-80cbe278.js";import{a as d,s as m,i as c,b as A}from"./hooking-a85ce46f.js";import{i as h,r as i,d as n}from"./notifications-106b3a79.js";import"./job-fcfd287b.js";import"./config-63dd91cb.js";WA.onInit().then(()=>{WA.player.state.hasFoundBlueSeed=!1,WA.player.state.hasFoundGreenSeed=!1,WA.player.state.hasFoundRedSeed=!1,h(),WA.state.dragonLight=!1,WA.state.blueFire=!1,WA.player.state.onVariableChange("hasFoundBlueSeed").subscribe(()=>{WA.room.hideLayer("blueSeed")}),WA.state.greenFire=!1,WA.player.state.onVariableChange("hasFoundGreenSeed").subscribe(()=>{WA.room.hideLayer("excavations/exca6/found")}),WA.state.redFire=!1,WA.player.state.onVariableChange("hasFoundRedSeed").subscribe(()=>{console.log("todo")}),d([{stepIn:"hiddenZoneFloor/hiddenZoneFloor",hide:"hiddenZoneTop"}]),m("hiddenZoneFloor/hooking",()=>{n({id:"gem",name:e("maze.gem"),image:"gem.png",description:e("maze.gemDescription")}),WA.player.state.hasFoundRedSeed=!0}),c(["excavations/exca1","excavations/exca2","excavations/exca3","excavations/exca4","excavations/exca5"],[()=>{console.log("Excavation has been made !")}]);let o=null;c(["excavations/exca6"],[()=>{WA.room.onEnterLayer("excavations/exca6/found").subscribe(()=>{WA.player.state.hasFoundGreenSeed||(o=WA.ui.displayActionMessage({message:e("maze.takeSeedMsg"),callback:()=>{n({id:"graine",name:e("maze.seed"),image:"graine.png",description:e("maze.seedDescription")}),WA.player.state.hasFoundGreenSeed=!0}}))}),WA.room.onLeaveLayer("excavations/exca6/trace").subscribe(()=>{o==null||o.remove()})}]),A(["switchingTiles"],[()=>{WA.room.hideLayer("blueArtifact"),WA.room.showLayer("blueSeed"),WA.room.showLayer("switchTileVictory"),WA.room.onEnterLayer("blueSeed").subscribe(()=>{let l=0;!WA.player.state.hasFoundBlueSeed&&l<1&&(o=WA.ui.displayActionMessage({message:e("maze.takePowderMsg"),callback:()=>{n({id:"powder",name:e("maze.powder"),image:"poudre.png",description:e("maze.powderDescription")}),WA.player.state.hasFoundBlueSeed=!0}}),l++)}),WA.room.onLeaveLayer("blueSeed").subscribe(()=>{o==null||o.remove()})}]);let a=null;WA.room.onEnterLayer("triggerBlue").subscribe(()=>{WA.state.blueFire?a=WA.ui.displayActionMessage({message:e("maze.fireOn"),callback:()=>{}}):WA.player.state.hasFoundBlueSeed?a=WA.ui.displayActionMessage({message:e("maze.triggerBlue"),callback:()=>{i("powder"),WA.room.hideLayer("torchesTop/offTop/torcheBlueOffTop"),WA.room.hideLayer("torchesBot/offBot/torcheBlueOffBot"),WA.room.showLayer("torchesTop/onTop/torcheBlueOnTop"),WA.room.showLayer("torchesBot/onBot/torcheBlueOnBot"),WA.state.blueFire=!0}}):a=WA.ui.displayActionMessage({message:e("maze.empty"),callback:()=>{}})}),WA.room.onLeaveLayer("triggerBlue").subscribe(()=>{a==null||a.remove()});let r=null;WA.room.onEnterLayer("triggerRed").subscribe(()=>{WA.state.redFire?r=WA.ui.displayActionMessage({message:e("maze.fireOn"),callback:()=>{}}):WA.player.state.hasFoundRedSeed?r=WA.ui.displayActionMessage({message:e("maze.triggerRed"),callback:()=>{i("gem"),WA.room.hideLayer("torchesTop/offTop/torcheRedOffTop"),WA.room.hideLayer("torchesBot/offBot/torcheRedOffBot"),WA.room.showLayer("torchesTop/onTop/torcheRedOnTop"),WA.room.showLayer("torchesBot/onBot/torcheRedOnBot"),WA.state.redFire=!0}}):r=WA.ui.displayActionMessage({message:e("maze.empty"),callback:()=>{}})}),WA.room.onLeaveLayer("triggerRed").subscribe(()=>{r==null||r.remove()});let s=null;WA.room.onEnterLayer("triggerGreen").subscribe(()=>{WA.state.greenFire?s=WA.ui.displayActionMessage({message:e("maze.fireOn"),callback:()=>{}}):WA.player.state.hasFoundGreenSeed?s=WA.ui.displayActionMessage({message:e("maze.triggerGreen"),callback:()=>{i("seed"),WA.room.hideLayer("torchesTop/offTop/torcheGreenOffTop"),WA.room.hideLayer("torchesBot/offBot/torcheGreenOffBot"),WA.room.showLayer("torchesTop/onTop/torcheGreenOnTop"),WA.room.showLayer("torchesBot/onBot/torcheGreenOnBot"),WA.state.greenFire=!0}}):s=WA.ui.displayActionMessage({message:e("maze.empty"),callback:()=>{}})}),WA.room.onLeaveLayer("triggerGreen").subscribe(()=>{s==null||s.remove()}),WA.state.onVariableChange("blueFire").subscribe(()=>{t()}),WA.state.onVariableChange("redFire").subscribe(()=>{t()}),WA.state.onVariableChange("greenFire").subscribe(()=>{t()});const t=()=>{WA.state.blueFire&&WA.state.redFire&&WA.state.greenFire&&(WA.room.showLayer("dragonTopLight"),WA.room.showLayer("dragonLight"),WA.room.showLayer("mountainDoorAnimate"))}});
