import{b as g}from"./init-22028896.js";import{i as p,s as y}from"./job-42f3db94.js";import{t as o}from"./translate-9557bc41.js";import{i as W}from"./hiddenZone-8ca7275f.js";import{o as a}from"./discussion-8e45d0bc.js";import{i as k,h as c,d}from"./notifications-26c51365.js";import{s as h}from"./hooking-5544ce40.js";import"./actionForAllPlayers-0f29533a.js";g();WA.onInit().then(()=>{console.log("door variable",WA.state.chest),p(),y("spy"),k();let n=!1;const u=()=>{setTimeout(()=>{WA.room.hideLayer("lights/lights1"),WA.room.showLayer("lights/lights2"),setTimeout(()=>{WA.room.hideLayer("lights/lights2"),WA.room.showLayer("lights/lights1"),u()},300)},300)};u(),h("hookingD7",()=>{const e=[];e.push({x:5,y:67,tile:null,layer:"hookingD7/collides"}),WA.room.setTiles(e)});let r=null;WA.room.onEnterLayer("closeDoorMessage").subscribe(()=>{r=WA.ui.displayActionMessage({message:o("museum.doorClosed"),callback:()=>{}})}),WA.room.onLeaveLayer("closeDoorMessage").subscribe(()=>{r==null||r.remove()});let l=null;WA.room.onEnterLayer("bigRoomAccess/keeperZone").subscribe(()=>{l=WA.ui.displayActionMessage({message:o("museum.speakToKeeper"),callback:()=>{if(c("id-card")){a("views.museum.keeperName","views.museum.bigRoomAccess");const e=[];e.push({x:25,y:44,tile:null,layer:"bigRoomAccess/bigRoomCollides"}),e.push({x:26,y:44,tile:null,layer:"bigRoomAccess/bigRoomCollides"}),WA.room.setTiles(e),WA.room.hideLayer("doorsClosed/dc6")}else a("views.museum.keeperName","views.museum.bigRoomNoAccess")}})}),WA.room.onLeaveLayer("bigRoomAccess/keeperZone").subscribe(()=>{l==null||l.remove()});let m=null;WA.room.onEnterLayer("beginZone").subscribe(()=>{n||(WA.controls.disablePlayerControls(),m=WA.ui.displayActionMessage({message:o("museum.beginBtn"),callback:()=>{a("Voix off","views.museum.beginText","Go !","Discussion","middle","middle","50vh","90vw",()=>{WA.controls.restorePlayerControls(),n=!0})}}))}),WA.room.onLeaveLayer("beginZone").subscribe(()=>{n||m==null||m.remove()});let t=null;WA.room.onEnterLayer("beginDiscussZone").subscribe(()=>{WA.controls.disablePlayerControls(),t=WA.ui.displayActionMessage({message:o("museum.speakToKeeper"),callback:()=>{a(WA.player.name,"views.museum.beginDiscussion","views.choice.close","discussion","bottom","middle","50vh","90vw",()=>{WA.controls.restorePlayerControls()})}})}),WA.room.onLeaveLayer("beginDiscussZone").subscribe(()=>{t==null||t.remove()});for(let e=1;e<8;e++)W([{stepIn:`fogsZone/fog${[e]}`,hide:`fogs/fog${[e]}`}]);const A=e=>{let s=null;WA.room.onEnterLayer(`search/s${e}`).subscribe(()=>{e===5&&!c("id-card")?s=WA.ui.displayActionMessage({message:o("museum.search"),callback:()=>{d({id:"id-card",name:"museum.idCardTitle",image:"myItem.png",description:"museum.idCardDescription"})}}):s=WA.ui.displayActionMessage({message:o("museum.search"),callback:()=>{s=WA.ui.displayActionMessage({message:o("museum.searchEmpty"),callback:()=>{}})}})}),WA.room.onLeaveLayer(`search/s${e}`).subscribe(()=>{s==null||s.remove()})};for(let e=1;e<8;e++)A(e);const b=e=>{let s=null;WA.room.onEnterLayer(`pickPocketInvited/i${e}`).subscribe(()=>{e===8&&!c("access-card")?s=WA.ui.displayActionMessage({message:o("museum.pickpocket"),callback:()=>{d({id:"access-card",name:"museum.accessCard",image:"myItem.png",description:"museum.accessCardDescription"})}}):s=WA.ui.displayActionMessage({message:o("museum.pickpocket"),callback:()=>{s=WA.ui.displayActionMessage({message:o("museum.pickpocketEmpty"),callback:()=>{}})}})}),WA.room.onLeaveLayer(`pickPocketInvited/i${e}`).subscribe(()=>{s==null||s.remove()})};for(let e=1;e<13;e++)b(e);let i=null;WA.room.onEnterLayer("desktopAccessZone").subscribe(()=>{c("access-card")?i=WA.ui.displayActionMessage({message:o("museum.desktopOpen"),callback:()=>{i=WA.ui.displayActionMessage({message:o("museum.desktopOpenMsg"),callback:()=>{const e=[];e.push({x:38,y:11,tile:null,layer:"desktopCollides"}),e.push({x:39,y:11,tile:null,layer:"desktopCollides"}),WA.room.setTiles(e),WA.room.hideLayer("doorsClosed/dc4")}})}}):i=WA.ui.displayActionMessage({message:o("museum.doorClosed"),callback:()=>{}})}),WA.room.onLeaveLayer("desktopAccessZone").subscribe(()=>{i==null||i.remove()});for(let e=0;e<9;e++){let s=null;WA.room.onEnterLayer(`desktopItems/i${e}`).subscribe(()=>{s=WA.ui.displayActionMessage({message:o("museum.search"),callback:()=>{s=WA.ui.displayActionMessage({message:o(`museum.desktopItems${e}`),callback:()=>{e===0&&a("views.museum.annuaryTitle","views.museum.annuaryContent")}})}})}),WA.room.onLeaveLayer(`desktopItems/i${e}`).subscribe(()=>{s==null||s.remove()})}});
