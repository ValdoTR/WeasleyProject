import{t as m}from"./translate-a3054a4c.js";import{c as W}from"./job-3160909b.js";let e=null;const h=(r,i=null)=>{const o=WA.state.mapWidth,t=WA.state.mapHeight,a=[];if(i)for(let l=1;l<i.length;l++)a.push({x:i[l].x,y:i[l].y,tile:null,layer:`${r}/block`});else for(let l=1;l<o;l++)for(let u=1;u<t;u++)a.push({x:l,y:u,tile:null,layer:`${r}/block`});WA.room.setTiles(a)},$=(r=["secretPassageZone"],i=null,o=null)=>{for(let t=0;t<r.length;t++)WA.state[`${r[t]}Discovered`]?(WA.room.hideLayer(`${r[t]}/trace`),WA.room.showLayer(`${r[t]}/found`),WA.room.hideLayer(`${r[t]}/disappear`)):(W("findSecretPassages")?(WA.room.showLayer(`${r[t]}/trace`),WA.room.onEnterLayer(`${r[t]}/trace`).subscribe(()=>{WA.state[`${r[t]}Discovered`]||(e=WA.ui.displayActionMessage({message:m("utils.executeAction",{action:m("modules.secretPassage.findSecretPassage")}),callback:()=>{WA.state[`${r[t]}Discovered`]=!0}}))}),WA.room.onLeaveLayer(`${r[t]}/trace`).subscribe(()=>{e==null||e.remove()})):WA.room.hideLayer(`${r[t]}/trace`),WA.state.onVariableChange(`${r[t]}Discovered`).subscribe(()=>{A(r[t],i?i[t]:null,o?o[t]:null)}))},A=(r,i=null,o=null)=>{WA.room.hideLayer(`${r}/trace`),WA.room.showLayer(`${r}/search`),setTimeout(()=>{WA.room.showLayer(`${r}/found`),WA.room.hideLayer(`${r}/disappear`),h(r,o),setTimeout(()=>{WA.room.hideLayer(`${r}/search`),i&&i()},1e3)},3e3)};export{$ as i,h as r};
