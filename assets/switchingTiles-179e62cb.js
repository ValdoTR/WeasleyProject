import{t as A}from"./translate-b062212e.js";let $=null;const m=(e=["switchingTiles"],t=[])=>{for(let a=0;a<e.length;a++)l(e[a],t[a]??null)},l=(e,t=null,a=!1,r="")=>{const o=JSON.parse(WA.state[`${e}VictoryCondition`]),_=WA.state[`${e}TilesNumber`];if(WA.state[`${e}IsVictory`])t&&t();else for(let s=0;s<Object.keys(o).length;s++)u(e,s),WA.room.onEnterLayer(`${e}/${s}_layer/zone`).subscribe(()=>{WA.state[`${e}IsVictory`]||(a?setTimeout(()=>{$=WA.ui.displayActionMessage({message:A("utils.executeAction",{action:A(r)}),callback:()=>{W(e,s,_,o)}})},100):W(e,s,_,o))}),a&&WA.room.onLeaveLayer(`${e}/${s}_layer/zone`).subscribe(()=>{setTimeout(()=>{$==null||$.remove()},100)}),WA.state.onVariableChange(`${e}_${s}_value`).subscribe(()=>{u(e,s)});WA.state.onVariableChange(`${e}IsVictory`).subscribe(s=>{s&&t&&t()})},n=(e,t)=>{for(let a=0;a<Object.keys(t).length;a++)if(WA.state[`${e}_${a}_value`]!=t[a])return!1;return!0},W=(e,t,a,r)=>{let o=WA.state[`${e}_${t}_value`]?WA.state[`${e}_${t}_value`]:0;WA.state[`${e}_${t}_value`]=(o+1)%a,n(e,r)&&(WA.state[`${e}IsVictory`]=!0)},u=(e,t)=>{WA.room.hideLayer(`${e}/${t}_layer`),WA.room.showLayer(`${e}/${t}_layer/${WA.state[`${e}_${t}_value`]}`);for(let a=1;a<4;a++)WA.room.hideLayer(`${e}/${t}_layer_${a}`),WA.room.showLayer(`${e}/${t}_layer_${a}/${WA.state[`${e}_${t}_value`]}`)};export{m as i,l as s};
