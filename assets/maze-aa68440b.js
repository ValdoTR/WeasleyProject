import{i as d}from"./job-7cad4490.js";import{a as m,s as A,i as c,b as h}from"./hooking-13e17f8c.js";import{t as e}from"./translate-80cbe278.js";import{i as u,r as n,d as l}from"./notifications-106b3a79.js";import"./config-63dd91cb.js";WA.onInit().then(()=>{WA.player.state.hasFoundBlueSeed=!1,WA.player.state.hasFoundGreenSeed=!1,WA.player.state.hasFoundRedSeed=!1,u(),d(),WA.state.dragonLight=!1,WA.state.blueFire=!1,WA.state.onVariableChange("blueFire").subscribe(o=>{o&&(WA.room.hideLayer("torchesTop/offTop/torcheBlueOffTop"),WA.room.hideLayer("torchesBot/offBot/torcheBlueOffBot"),WA.room.showLayer("torchesTop/onTop/torcheBlueOnTop"),WA.room.showLayer("torchesBot/onBot/torcheBlueOnBot"))}),WA.player.state.onVariableChange("hasFoundBlueSeed").subscribe(()=>{WA.room.hideLayer("blueSeed")}),WA.state.greenFire=!1,WA.state.onVariableChange("greenFire").subscribe(o=>{o&&(WA.room.hideLayer("torchesTop/offTop/torcheGreenOffTop"),WA.room.hideLayer("torchesBot/offBot/torcheGreenOffBot"),WA.room.showLayer("torchesTop/onTop/torcheGreenOnTop"),WA.room.showLayer("torchesBot/onBot/torcheGreenOnBot"))}),WA.player.state.onVariableChange("hasFoundGreenSeed").subscribe(()=>{WA.room.hideLayer("excavations/exca6/found")}),WA.state.redFire=!1,WA.state.onVariableChange("redFire").subscribe(o=>{o&&(WA.room.hideLayer("torchesTop/offTop/torcheRedOffTop"),WA.room.hideLayer("torchesBot/offBot/torcheRedOffBot"),WA.room.showLayer("torchesTop/onTop/torcheRedOnTop"),WA.room.showLayer("torchesBot/onBot/torcheRedOnBot"))}),WA.player.state.onVariableChange("hasFoundRedSeed").subscribe(()=>{console.log("todo")}),m([{stepIn:"hiddenZoneFloor/hiddenZoneFloor",hide:"hiddenZoneTop"}]),A("hiddenZoneFloor/hooking",()=>{l({id:"gem",name:e("maze.gem"),image:"gem.png",description:e("maze.gemDescription")}),WA.player.state.hasFoundRedSeed=!0}),c(["excavations/exca1","excavations/exca2","excavations/exca3","excavations/exca4","excavations/exca5"],[()=>{console.log("Excavation has been made !")}]);let a=null;c(["excavations/exca6"],[()=>{WA.room.onEnterLayer("excavations/exca6/found").subscribe(()=>{WA.player.state.hasFoundGreenSeed||(a=WA.ui.displayActionMessage({message:e("maze.takeSeedMsg"),callback:()=>{l({id:"graine",name:e("maze.seed"),image:"graine.png",description:e("maze.seedDescription")}),WA.player.state.hasFoundGreenSeed=!0}}))}),WA.room.onLeaveLayer("excavations/exca6/trace").subscribe(()=>{a==null||a.remove()})}]),h(["switchingTiles"],[()=>{WA.room.hideLayer("blueArtifact"),WA.room.showLayer("blueSeed"),WA.room.showLayer("switchTileVictory"),WA.room.onEnterLayer("blueSeed").subscribe(()=>{let o=0;!WA.player.state.hasFoundBlueSeed&&o<1&&(a=WA.ui.displayActionMessage({message:e("maze.takePowderMsg"),callback:()=>{l({id:"powder",name:e("maze.powder"),image:"poudre.png",description:e("maze.powderDescription")}),WA.player.state.hasFoundBlueSeed=!0}}),o++)}),WA.room.onLeaveLayer("blueSeed").subscribe(()=>{a==null||a.remove()})}]);let r=null;WA.room.onEnterLayer("triggerBlue").subscribe(()=>{WA.state.blueFire?r=WA.ui.displayActionMessage({message:e("maze.fireOn"),callback:()=>{}}):WA.player.state.hasFoundBlueSeed?r=WA.ui.displayActionMessage({message:e("maze.triggerBlue"),callback:()=>{n("powder"),WA.state.blueFire=!0}}):r=WA.ui.displayActionMessage({message:e("maze.empty"),callback:()=>{}})}),WA.room.onLeaveLayer("triggerBlue").subscribe(()=>{r==null||r.remove()});let s=null;WA.room.onEnterLayer("triggerRed").subscribe(()=>{WA.state.redFire?s=WA.ui.displayActionMessage({message:e("maze.fireOn"),callback:()=>{}}):WA.player.state.hasFoundRedSeed?s=WA.ui.displayActionMessage({message:e("maze.triggerRed"),callback:()=>{n("gem"),WA.state.redFire=!0}}):s=WA.ui.displayActionMessage({message:e("maze.empty"),callback:()=>{}})}),WA.room.onLeaveLayer("triggerRed").subscribe(()=>{s==null||s.remove()});let t=null;WA.room.onEnterLayer("triggerGreen").subscribe(()=>{WA.state.greenFire?t=WA.ui.displayActionMessage({message:e("maze.fireOn"),callback:()=>{}}):WA.player.state.hasFoundGreenSeed?t=WA.ui.displayActionMessage({message:e("maze.triggerGreen"),callback:()=>{n("seed"),WA.state.greenFire=!0}}):t=WA.ui.displayActionMessage({message:e("maze.empty"),callback:()=>{}})}),WA.room.onLeaveLayer("triggerGreen").subscribe(()=>{t==null||t.remove()}),WA.state.onVariableChange("blueFire").subscribe(()=>{i()}),WA.state.onVariableChange("redFire").subscribe(()=>{i()}),WA.state.onVariableChange("greenFire").subscribe(()=>{i()});const i=()=>{WA.state.blueFire&&WA.state.redFire&&WA.state.greenFire&&(WA.room.showLayer("dragonTopLight"),WA.room.showLayer("dragonLight"),WA.room.showLayer("mountainDoorAnimate"))}});
