import{b as c}from"./init-22028896.js";import{i as A}from"./job-bc687e36.js";import{t}from"./translate-ab684b55.js";import{i as W,r as d}from"./secretPassages-ab2c7234.js";import{i as l}from"./hiddenZone-8ca7275f.js";import{i as h,s as L}from"./readRunes-402d5c07.js";import{b,i as n,h as y,a as r}from"./actionForAllPlayers-42768cef.js";import{s as f,t as m}from"./arrayFilling-3bc428d4.js";import"./config-63dd91cb.js";c();WA.onInit().then(()=>{A(),W(["secretPassage"],[()=>{console.log("secret passage discovered !")}],[[{x:38,y:6},{x:39,y:6},{x:40,y:6},{x:39,y:7},{x:40,y:7},{x:39,y:8},{x:40,y:8},{x:39,y:9},{x:40,y:9},{x:39,y:10},{x:40,y:10}]]);for(let e=1;e<11;e++)l([{stepIn:`eyes/eye${[e]}`,hide:`blackFogs/blackFog${[e]}`}]);l([{stepIn:"stepMapFog1",hide:"mapFog1"}]),l([{stepIn:"stepMapFog2",hide:"mapFogn"}]),h(),L("runeZone",{content:"escape.content",title:"escape.title"}),b("victory",["blue","yellow","red"],()=>{WA.room.hideLayer("runes/lightOff"),WA.room.showLayer("runes/lightOn"),d("victoryRunes",[{x:30,y:31},{x:31,y:31},{x:32,y:31}]),WA.room.hideLayer("victoryRunesWall"),WA.room.showLayer("victoryRunes/openedWall")}),f("readRunesEscape",[["blue","yellow","red"]],()=>{u()},()=>{}),n("blue",e=>{e?(WA.room.hideLayer("runes/angel"),WA.room.showLayer("runes/angelOn")):(WA.room.hideLayer("runes/angelOn"),WA.room.showLayer("runes/angel"))},!1);let o=null;WA.room.onEnterLayer("runes/left").subscribe(()=>{!WA.state.runesVictory&&!y("blue")&&(o=WA.ui.displayActionMessage({message:t("escape.active"),callback:()=>{r("blue",!0),m("readRunesEscape","blue")}}))}),WA.room.onLeaveLayer("runes/left").subscribe(()=>{o==null||o.remove()}),n("red",e=>{e?(WA.room.hideLayer("runes/demon"),WA.room.showLayer("runes/demonOn")):(WA.room.hideLayer("runes/demonOn"),WA.room.showLayer("runes/demon"))},!1);let s=null;WA.room.onEnterLayer("runes/center").subscribe(()=>{!WA.state.runesVictory&&!WA.state.demon&&(s=WA.ui.displayActionMessage({message:t("escape.active"),callback:()=>{r("red",!0),m("readRunesEscape","red")}}))}),WA.room.onLeaveLayer("runes/center").subscribe(()=>{s==null||s.remove()}),n("yellow",e=>{e?(WA.room.hideLayer("runes/knight"),WA.room.showLayer("runes/knightOn")):(WA.room.hideLayer("runes/knightOn"),WA.room.showLayer("runes/knight"))},!1);let a=null;WA.room.onEnterLayer("runes/right").subscribe(()=>{!WA.state.runesVictory&&!WA.state.knight&&(a=WA.ui.displayActionMessage({message:t("escape.active"),callback:()=>{r("yellow",!0),m("readRunesEscape","yellow")}}))}),WA.room.onLeaveLayer("runes/right").subscribe(()=>{a==null||a.remove()});const u=()=>{setTimeout(()=>{r("red",!1),r("blue",!1),r("yellow",!1)},300)};WA.room.onEnterLayer("dalles/dK").subscribe(()=>{WA.room.showLayer("dalles/dKPush")}),WA.room.onLeaveLayer("dalles/dK").subscribe(()=>{WA.room.hideLayer("dalles/dKPush")}),WA.room.onEnterLayer("dalles/dA").subscribe(()=>{WA.room.showLayer("dalles/dAPush")}),WA.room.onLeaveLayer("dalles/dA").subscribe(()=>{WA.room.hideLayer("dalles/dAPush")}),WA.room.onEnterLayer("dalles/dD").subscribe(()=>{WA.room.showLayer("dalles/dDPush")}),WA.room.onLeaveLayer("dalles/dD").subscribe(()=>{WA.room.hideLayer("dalles/dDPush")}),n("artifactBrok",()=>{r("artifactBrok",!0),WA.room.hideLayer("artifact"),WA.room.showLayer("brokenArtifact"),d("finishedDoor"),WA.room.hideLayer("finishedWall1"),WA.room.showLayer("finishedDoor/openedDoor1"),WA.room.hideLayer("finishedWall2"),WA.room.showLayer("finishedDoor/openedDoor2"),WA.room.hideLayer("templeDoorEmpty"),WA.room.showLayer("templeDoorLight")});let i=null;WA.room.onEnterLayer("artifactZone").subscribe(()=>{y("artifactBrok")||(i=WA.ui.displayActionMessage({message:t("escape.artifact"),callback:()=>{r("artifactBrok")}}))}),WA.room.onLeaveLayer("artifactZone").subscribe(()=>{y("artifactBrok")||i==null||i.remove()})});
