import{r as y}from"./config-63dd91cb.js";import{t as a}from"./translate-0f2400b3.js";const u=3,w=()=>{WA.player.state.inventory="[]",WA.ui.actionBar.addButton({id:"inventory",label:a("modules.inventory.inventory"),callback:async()=>{i?l():await d()}}),WA.player.state.onVariableChange("askForInventoryWebsiteClose").subscribe(n=>{n&&l()})},b=n=>{const e=JSON.parse(WA.player.state.inventory);return!v(n.id)&&e.length<u?(e.push(n),WA.player.state.inventory=JSON.stringify(e),c(a("modules.inventory.objectTaken",{object:a(n.name)}),null,"success"),!0):(c("modules.inventory.cannotTakeThis",null,"error"),!1)},v=n=>{const e=JSON.parse(WA.player.state.inventory);for(let t=0;t<e.length;t++)if(e[t].id===n)return!0;return!1};let i=null;const d=async()=>{WA.controls.disablePlayerControls(),i=await WA.ui.website.open({url:`${y}/views/inventory/inventory.html`,allowApi:!0,allowPolicy:"",position:{vertical:"middle",horizontal:"middle"},size:{height:"50vh",width:"50vw"}}),WA.player.state.askForInventoryWebsiteClose=!1},l=()=>{i==null||i.close(),i=null,WA.controls.restorePlayerControls()},I=()=>{WA.player.state.askForInventoryWebsiteClose=!0},A=()=>JSON.parse(WA.player.state.inventory),W=()=>u,m=()=>"default.png";let o={};const p=()=>{const n=Object.keys(o);console.log("keys",n);const e=[];for(let t=0;t<n.length;t++)e.push(o[n[t]].index);console.log("taken indexes",e);for(let t=0;t<e.length;t++)if(!e.includes(t))return t;return e.length},c=async(n,e=null,t="info")=>{const s=Date.now(),r=p();console.log("notificationWebsite",o),console.log("new Index",r),o[s]={index:r,website:await f(r,n,e,t)},setTimeout(()=>{o[s]&&(o[s].website.close(),delete o[s])},4e3)},f=async(n,e,t,s)=>await WA.ui.website.open({url:`${y}/views/notifications/notification.html?content=${e}&title=${t}&type=${s}&index=${n}`,allowApi:!0,allowPolicy:"",position:{vertical:"top",horizontal:"right"},size:{height:"100vh",width:"20vw"}});export{m as a,I as b,W as c,b as d,A as g,w as i,c as n};
