import{t as a}from"./translate-ab684b55.js";import{c as W}from"./job-de34a330.js";let t=null;const A=r=>{const i=WA.state.mapWidth,o=WA.state.mapHeight,m=[];for(let e=1;e<i;e++)for(let l=1;l<o;l++)m.push({x:e,y:l,tile:null,layer:`${r}/block`});WA.room.setTiles(m)},$=(r=["secretPassageZone"],i=null)=>{for(let o=0;o<r.length;o++)WA.state[`${r[o]}Discovered`]?(WA.room.hideLayer(`${r[o]}/trace`),WA.room.showLayer(`${r[o]}/found`),WA.room.hideLayer(`${r[o]}/disappear`)):(W("findSecretPassages")?(WA.room.showLayer(`${r[o]}/trace`),WA.room.onEnterLayer(`${r[o]}/trace`).subscribe(()=>{WA.state[`${r[o]}Discovered`]||(t=WA.ui.displayActionMessage({message:a("utils.executeAction",{action:a("modules.secretPassage.findSecretPassage")}),callback:()=>{WA.state[`${r[o]}Discovered`]=!0}}))}),WA.room.onLeaveLayer(`${r[o]}/trace`).subscribe(()=>{t==null||t.remove()})):WA.room.hideLayer(`${r[o]}/trace`),WA.state.onVariableChange(`${r[o]}Discovered`).subscribe(()=>{d(r[o],i?i[o]:null)}))},d=(r,i=null)=>{WA.room.hideLayer(`${r}/trace`),WA.room.showLayer(`${r}/search`),setTimeout(()=>{WA.room.showLayer(`${r}/found`),WA.room.hideLayer(`${r}/disappear`),A(r),setTimeout(()=>{WA.room.hideLayer(`${r}/search`),i&&i()},1e3)},3e3)};export{$ as i,A as r};
