import{t as a}from"./translate-b062212e.js";import{c as d}from"./job-f83e1f24.js";let t=null;const h=o=>{const r=WA.state.mapWidth,i=WA.state.mapHeight;console.log("height",i),console.log("width",r);const m=[];for(let e=1;e<r;e++)for(let l=1;l<i;l++)m.push({x:e,y:l,tile:null,layer:`${o}/block`});WA.room.setTiles(m)},$=(o=["secretPassageZone"],r=null)=>{for(let i=0;i<o.length;i++)WA.state[`${o[i]}Discovered`]?(WA.room.hideLayer(`${o[i]}/trace`),WA.room.showLayer(`${o[i]}/found`),WA.room.hideLayer(`${o[i]}/disappear`)):(d("findSecretPassages")?(WA.room.showLayer(`${o[i]}/trace`),WA.room.onEnterLayer(`${o[i]}/trace`).subscribe(()=>{WA.state[`${o[i]}Discovered`]||(t=WA.ui.displayActionMessage({message:a("utils.executeAction",{action:a("modules.secretPassage.findSecretPassage")}),callback:()=>{WA.state[`${o[i]}Discovered`]=!0}}))}),WA.room.onLeaveLayer(`${o[i]}/trace`).subscribe(()=>{t==null||t.remove()})):(WA.room.hideLayer(`${o[i]}/trace`),WA.room.hideLayer(`${o[i]}/found`),WA.room.hideLayer(`${o[i]}/disappear`)),WA.state.onVariableChange(`${o[i]}Discovered`).subscribe(()=>{W(o[i],r?r[i]:null)}))},W=(o,r=null)=>{WA.room.hideLayer(`${o}/trace`),WA.room.showLayer(`${o}/search`),setTimeout(()=>{WA.room.showLayer(`${o}/found`),WA.room.hideLayer(`${o}/disappear`),h(o),setTimeout(()=>{WA.room.hideLayer(`${o}/search`),r&&r()},1e3)},3e3)};export{$ as i,h as r};
